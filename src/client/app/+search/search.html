<div #target></div>
<md-sidenav-layout>
  <md-sidenav #searchFilter align="start" mode="push">
    <div class="md-overlay-container" *ngIf="(uiState.data | async).loading">
      <md-progress-bar color="accent" mode="indeterminate"></md-progress-bar>
    </div>
    <md-slide-toggle class="count-toggle" [checked]="preferences.displayFilterCounts" color="primary" value="toggle" (change)="countToggle($event)">Display Filter Counts</md-slide-toggle>
    <filter-component class="filter" [counted]="preferences.displayFilterCounts" [filters]="filter.data | async"></filter-component>
  </md-sidenav>
  
  <button class="filter" (click)="searchFilter.toggle()" style="display:none;">FILTERS</button>

  <section class="search-results">
    <div layout="row" md-scroll-y="" layout-align="center start" layout-padding="">
      <div flex-xl="85" flex-gt-lg="95" flex="100" *ngIf="config.viewType.value == 'grid'">
        <div layout="row" layout-sm="column" layout-wrap layout-align="space-between">
          <breadcrumb-component layout="row" layout-wrap class="root" [filters]="filter.data | async" [loading]="(uiState.data | async).loading"></breadcrumb-component>
          <div layout="row">
            <div class="asset-sort-display" flex="100" layout-align="end center">
              <button md-icon-button [md-menu-trigger-for]="assetSortMenu"><md-icon>sort</md-icon></button>
              <span class="md-caption" *ngIf="sortOptions">
                <strong>Sort By: </strong>{{ sortOptions.currentSort.name }}
              </span> 
            </div>
          </div>
        </div>



        <div layout="row" layout-align="end start" layout-wrap layout-align="space-between">
          <!--<div layout="row" layout-align="start center">
            <div class="asset-sort-display" flex="100">
              <button md-icon-button [md-menu-trigger-for]="assetSortMenu"><md-icon>sort</md-icon></button>
              <span class="md-caption" *ngIf="sortOptions">
                <strong>Sort By: </strong>{{ sortOptions.currentSort.name }}
              </span> 
            </div>
          </div>-->
          <wz-pagination [pagination]="assets.pagination" (getPage)="changePage($event)" flex layout-align="end stretch"></wz-pagination>
        </div>

        <wz-asset-list 
          [assets]="assets.items" 
          [userCan]="userCan"
          [currentUser]="currentUser"
          [collection]="activeCollection.data | async"
          (onAddToCollection)="addToCollection($event)"
          (onRemoveFromCollection)="removeFromCollection($event)"
          (onShowNewCollection)="showNewCollection($event)"
          (addToCart)="addAssetToCart($event)" 
          (onDownloadComp)="downloadComp($event)" 
          class="{{config.viewType.value}}">
        </wz-asset-list>
          
        <wz-pagination [pagination]="assets.pagination" (getPage)="changePage($event)"></wz-pagination>
      </div>
    </div>
  </section>
</md-sidenav-layout>

<md-menu x-position="after" #assetSortMenu="mdMenu">
  <wz-sort-component [current]="sortOptions.currentSort" [items]="sortOptions.sorts" (sort)="onSortResults($event)"></wz-sort-component>
</md-menu>