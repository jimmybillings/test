<md-sidenav-layout>
	<md-sidenav #searchFilter [opened]="(userPreferences.data | async).displayFilterTree" align="start" [mode]="(screenWidth > 600) ? 'side' : 'over'">
		<md-slide-toggle class="count-toggle" [checked]="(userPreferences.data | async).displayFilterCounts" color="primary" value="toggle" (change)="countToggle($event)">{{ 'SEARCH.FILTERS.FILTER_COUNT_TOOGLE_LABEL' | translate }}</md-slide-toggle>
		<filter-component (onFilterEvent)="filterEvent($event)" class="filter" [counted]="(userPreferences.data | async).displayFilterCounts" [filters]="filter.data | async"></filter-component>
	</md-sidenav>
	<!--this button has no display but is used to open the filter tray from the search component-->
	<button class="filter" (click)="searchFilter.toggle()" style="display:none;">{{'SEARCH.FILTERS.FILTERS_BTN_LABEL' | translate }}</button>
	<section class="search-header" layout="row" layout-align="center center">
		<header flex-gt-lg="95" flex="100">
			<div layout="row" layout-align="space-between end">
				<h2 *ngIf="!(assetData.data | async).items" flex="100" class="md-display-1 alert"> {{ 'SEARCH.NO_RESULTS.PG_HEADING' | translate }}</h2>
				<div *ngIf="(assetData.data | async).items" class="asset-sort-by tools" flex="auto">
					<button md-button class="is-dd" color="primary" [md-menu-trigger-for]="assetSortMenu">
						<span class="key">{{'SEARCH.SORT_BTN_LABEL' | translate }}</span><span class="value md-caption">{{ (sortDefinition.data | async).currentSort.name }}</span>
					</button>
					<button md-icon-button color="primary" title="{{ ((userPreferences.data | async).assetView == 'grid' ? 
						'SEARCH.ASSET_VIEW_LIST_BTN_TITLE' : 'SEARCH.ASSET_VIEW_GRID_BTN_TITLE') | translate }}" (click)="onChangeAssetView()">
						<md-icon>{{ (userPreferences.data | async).assetView == 'grid' ? 'view_list' : 'view_comfy' }}</md-icon>
					</button>

				</div>
			</div>
		</header>
	</section>
	<section class="search-results">
		<div layout="row" md-scroll-y="" layout-align="center start">
			<div flex-gt-lg="95" flex="100" *ngIf="(uiConfig.get('search') | async).config.viewType.value == 'grid'">
				<div layout-gt-md="row" layout="column" layout-align="space-between" layout-align-gt-md="space-between end">
					<breadcrumb-component layout="row" layout-wrap layout-align="start start" class="search-breadcrumbs root" 
					[filters]="filter.data | async" 
					(onFilterEvent)="filterEvent($event)"></breadcrumb-component>
					<wz-pagination flex="noshrink" *ngIf="(assetData.data | async).pagination.totalCount > 0" [pagination]="(assetData.data | async).pagination" (getPage)="changePage($event)"></wz-pagination>
				</div>
				<no-results *ngIf="!(assetData.data | async).items"></no-results>

				<wz-asset-grid *ngIf="(userPreferences.data | async).assetView =='grid'" [assets]="(assetData.data | async).items" [userCan]="userCan" [collection]="activeCollection.data | async"
					(onAddToCollection)="addToCollection($event)" (onRemoveFromCollection)="removeFromCollection($event)"
					(addToCart)="addAssetToCart($event)" (onDownloadComp)="downloadComp($event)" (showSpeedview)="showSpeedview($event)" (hideSpeedview)="hideSpeedview()" (onShowSnackBar)="showSnackBar($event)"
					class="grid">
				</wz-asset-grid>

				<wz-asset-list *ngIf="(userPreferences.data | async).assetView =='list'" [assets]="(assetData.data | async).items" [userCan]="userCan" [collection]="activeCollection.data | async"
					(onAddToCollection)="addToCollection($event)" (onRemoveFromCollection)="removeFromCollection($event)"
					(addToCart)="addAssetToCart($event)" (onDownloadComp)="downloadComp($event)" (showSpeedview)="showSpeedview($event)" (hideSpeedview)="hideSpeedview()" (onShowSnackBar)="showSnackBar($event)"
					class="list">
				</wz-asset-list>
				<wz-pagination flex="noshrink" *ngIf="(assetData.data | async).pagination.totalCount > 0" [pagination]="(assetData.data | async).pagination" (getPage)="changePage($event)"></wz-pagination>
			</div>
		</div>
	</section>
</md-sidenav-layout>

<md-menu x-position="before" #assetSortMenu="mdMenu">
	<wz-sort-component [current]="(sortDefinition.data | async).currentSort" [items]="(sortDefinition.data | async).sorts" (sort)="onSortResults($event)"></wz-sort-component>
</md-menu>

<wz-speedview [speedviewData]="speedviewData | async"></wz-speedview>
