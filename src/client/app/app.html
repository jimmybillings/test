<notification [state]="state"></notification>
<collection-form
  [UiState]="uiState"
  [collection]="focusedCollection | async"
  [config]="collectionFormConfig"
  [ngClass]="{'revealed': (uiState.uiState | async).newCollectionFormIsOpen}"
  layout="row" layout-align="center start">
</collection-form>
<collections-list-dd
  [UiState]="uiState"
  [focusedCollection]="focusedCollection | async"
  (deleted)="deleteCollection($event)"
  (showSearch)="showCollectionSearch($event)"
  (showFilter)="showCollectionFilter($event)"
  (showSort)="showCollectionSort($event)"
  (showNewCollection)="showNewCollection($event)"
  [ngClass]="{'revealed': (uiState.uiState | async).collectionsListIsOpen}"
  layout="row" layout-align="end start">
</collections-list-dd>
<!--<md-sidenav-layout fullscreen>
  <md-sidenav #sidenav>
    <md-nav-list>
      <a md-list-item>
        <md-icon md-list-icon>event_seat</md-icon>
        <span md-line>Take a Tour does this just get wider?</span>
      </a>
      <a md-list-item>
        <md-icon md-list-icon>fingerprint</md-icon>
        <span md-line>security</span>
      </a>
    </md-nav-list>
  </md-sidenav>-->
  
  <div class="app">
    <header [ngClass]="{
      'fixed': (uiState.uiState | async).showFixed, 
      'bin-tray-closed': !(uiState.uiState | async).binTrayIsOpen, 
      'search-closed': !(uiState.uiState | async).searchIsOpen
      }" class="app-header">
      <app-nav 
        [UiState]="uiState"
        [currentUser]="currentUser" 
        [state]="state" 
        [config]="header"
        [collection]="focusedCollection | async" 
        (onLogOut)="logout()" 
        (onOpenSidenav)="sidenav.open()">
      </app-nav>
      <search-box 
        *ngIf="(uiState.uiState | async).searchBarIsActive" 
        [currentUser]="currentUser" 
        [state]="state" 
        [UiState]="uiState"
        [apiConfig]="apiConfig" 
        [config]="searchBox" 
        (searchContext)="newSearchContext($event)">
      </search-box>
      <bin-tray 
        *ngIf="(uiState.uiState | async).searchBarIsActive && currentUser.loggedIn()" 
        [UiState]="uiState"
        [collection]="focusedCollection | async" 
        >
      </bin-tray>
    </header>
    <div [ngClass]="{'bin-tray-closed': !(uiState.uiState | async).binTrayIsOpen, 'search-closed': !(uiState.uiState | async).searchIsOpen}" class="main-content">
      <router-outlet></router-outlet>
    </div>
    <app-footer 
      [currentUser]="currentUser" 
      [supportedLanguages]="supportedLanguages" 
      (onChangeLang)="changeLang($event)">
    </app-footer>
  </div>
<!--</md-sidenav-layout>-->
