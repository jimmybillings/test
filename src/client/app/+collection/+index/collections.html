<section class="collection-head" layout="row" layout-align="center center">
	<header flex="100" flex-gt-sm="95" flex-gt-md="85" flex-gt-lg="80">
		<wz-item-search-form 
			[ngClass]="{ 'revealed' : collectionSearchIsShowing }" 
			[hidden]="!collectionSearchIsShowing" 
			[currentSearchQuery]="options.currentSearchQuery"
			placeholderTxt="{{ 'COLLECTION.INDEX.SEARCH_BOX_LABEL' | translate }}"
			(query)="search($event)" 
			(closeSearch)="toggleCollectionSearch()">
		</wz-item-search-form>
		<div flex="100" layout="row" layout-align="space-between end">
			<h2 flex="grow" class="md-display-1">{{ 'COLLECTION.INDEX.PAGE_TITLE' | translate }}</h2>
			<div class="tools" flex="auto">
				<button md-icon-button *ngIf="!collectionSearchIsShowing" title="{{ 'COLLECTION.DD_MENU.SEARCH_BTN_TITLE' | translate }}"
					type="button" (click)="toggleCollectionSearch()">
            <md-icon *ngIf="!collectionSearchIsShowing">search</md-icon>
          </button>
				<button md-icon-button *ngIf="collectionSearchIsShowing" class="collapse-search" title="{{ 'COLLECTION.DD_MENU.COLLAPSE_SEARCH_HOVER_TITLE' | translate }}"
					type="button" (click)="toggleCollectionSearch()">
            <md-icon>arrow_drop_up</md-icon>
          </button>
				<button md-icon-button title="{{ 'COLLECTION.DD_MENU.FILTER_BTN_TITLE' | translate }}" [md-menu-trigger-for]="filterCollectionOptions"><md-icon>filter_list</md-icon></button>
				<button md-icon-button title="{{ 'COLLECTION.DD_MENU.SORT_BTN_TITLE' | translate }}" [md-menu-trigger-for]="sortCollectionOptions"><md-icon>sort</md-icon></button>
			</div>
		</div>
	</header>
</section>

<div layout="row" layout-align="center start">
	<div class="md-caption query-details" flex="100" flex-gt-sm="95" flex-gt-md="85" flex-gt-lg="80">
		<span *ngIf="options.currentSearchQuery.q" flex="auto" class="search">
      <strong>{{ 'COLLECTION.DD_MENU.SEARCH_QUERY_TITLE' | translate }}</strong>{{options.currentSearchQuery.q}}
    </span>
		<span *ngIf="options && options.currentFilter.label !== 'ALL'" flex="auto" class="filter">
      <strong>{{ 'COLLECTION.DD_MENU.FILTER_BY_TITLE' | translate }}</strong>{{ options.currentFilter.name | translate}}
    </span>
		<span flex="100" class="sort" *ngIf="options">
      <strong>{{ 'COLLECTION.DD_MENU.SORTED_ON_TITLE' | translate }}</strong>{{ options.currentSort.name | translate }}
    </span>
	</div>
</div>

<section layout="row" flex="100" layout-margin-gt-xs layout-align="center start">
	<section class="collections-list" flex="100" flex-gt-sm="95" flex-gt-md="85" flex-gt-lg="80" layout-margin>
		<wz-pagination *ngIf="(collections.data | async).pagination.totalCount > 0" [pagination]="(collections.data | async).pagination"
			flex layout-align="end stretch" (getPage)="changePage($event)">
		</wz-pagination>
		<!-- COLLECTION LIST -->
		<wz-collection-item-list [collections]="(collections.data | async).items" (editCollection)="editCollection($event)"
			[activeCollection]="(activeCollection | async).id" (setActiveCollection)="selectActiveCollection($event)" (deleteCollection)="setCollectionForDelete($event);"
			(generateCollectionLink)="getAssetsForLink($event);">
		</wz-collection-item-list>
		<wz-pagination *ngIf="(collections.data | async).pagination.totalCount > 0" [pagination]="(collections.data | async).pagination"
			flex layout-align="end stretch" (getPage)="changePage($event)">
		</wz-pagination>
	</section>
</section>

<md-menu x-position="before" #filterCollectionOptions="mdMenu">
	<wz-sort-component [current]="options.currentFilter" [items]="filterOptions" (sort)="onFilterCollections($event)"></wz-sort-component>
</md-menu>

<md-menu x-position="before" #sortCollectionOptions="mdMenu">
	<wz-sort-component [current]="options.currentSort" [items]="sortOptions" (sort)="onSortCollections($event)"></wz-sort-component>
</md-menu>



