<section class="collection-head">
  <div layout="row" layout-align="center start">
    <header flex="100" flex-gt-md="95" flex-gt-lg="85">
        <collections-search-form
          [ngClass]="{ 'revealed' : collectionSearchIsShowing }"
          [hidden]="!collectionSearchIsShowing"
          [currentSearchQuery]="options.currentSearchQuery"
          (query)="search($event)"
          (closeSearch)="showCollectionSearch()">
        </collections-search-form>
        <collections-filter-dd 
          *ngIf="collectionFilterIsShowing"
          flex="100"
          [currentFilter]="options.currentFilter"
          (filter)="filter($event)"
          (close)="showCollectionFilter()"
          layout="row" 
          layout-align="end start" 
          class="revealed">
        </collections-filter-dd>
        <collections-sort-dd
          *ngIf="collectionSortIsShowing"
          flex="100"
          [currentSort]="options.currentSort"
          (sort)="sortBy($event)"
          (close)="showCollectionSort()"
          layout="row" 
          layout-align="end start" 
          class="revealed">
        </collections-sort-dd>
      <div flex="100" layout="row" layout-xs="column">
        <h2 flex="100" layout-align="end center" class="md-display-1">{{ 'COLLECTION.INDEX.PAGE_TITLE' | translate }}</h2>
        <div class="tools" flex="auto" layout-align="end center">
          <button md-icon-button
            *ngIf="!collectionSearchIsShowing"
            title="{{ 'COLLECTION.DD_MENU.SEARCH_BTN_TITLE' | translate }}"
            type="button" 
            (click)="toggleCollectionSearch()">
            <md-icon *ngIf="!collectionSearchIsShowing">search</md-icon>
          </button>
          <button md-icon-button
            *ngIf="collectionSearchIsShowing"
            class="collapse-search"
            title="{{ 'COLLECTION.DD_MENU.COLLAPSE_SEARCH_HOVER_TITLE' | translate }}"
            type="button"
            (click)="toggleCollectionSearch()">
            <!--<md-icon *ngIf="collectionSearchIsShowing">chevron_right</md-icon>-->
            <!--<md-icon *ngIf="collectionSearchIsShowing">remove_circle_outline</md-icon>-->
            <md-icon>arrow_drop_up</md-icon>
          </button>
          <button md-icon-button title="{{ 'COLLECTION.DD_MENU.FILTER_BTN_TITLE' | translate }}" (click)="showCollectionFilter($event)"><md-icon>filter_list</md-icon></button>
          <button md-icon-button title="{{ 'COLLECTION.DD_MENU.SORT_BTN_TITLE' | translate }}" (click)="showCollectionSort($event)"><md-icon>sort</md-icon></button>
        </div>
      </div>
    </header>
  </div>
</section>

<div layout="row" layout-align="center start">
  <div class="md-caption query-details"  flex="100" flex-gt-md="95" flex-gt-lg="85">
    <span *ngIf="options.currentSearchQuery.q" flex="auto" class="search">
      <strong>{{ 'COLLECTION.DD_MENU.SEARCH_QUERY_TITLE' | translate }}</strong>{{options.currentSearchQuery.q}}
    </span>
    <span *ngIf="options && options.currentFilter.label !== 'ALL'" flex="auto" class="filter">
      <strong>{{ 'COLLECTION.DD_MENU.FILTER_BY_TITLE' | translate }}</strong>{{'COLLECTION.INDEX.FILTER_DD_MENU.' +  options.currentFilter.label | uppercase | translate}}
    </span> 
    <span flex="100" class="sort" *ngIf="options">
      <strong>{{ 'COLLECTION.DD_MENU.SORTED_ON_TITLE' | translate }}</strong>{{'COLLECTION.INDEX.SORT_DD_MENU.' +  options.currentSort.label | uppercase | translate }}
    </span> 
  </div>
</div>

<section class="hero">
  <div layout="row" flex="100" layout-margin layout-align="center start">
    <section class="collections-list" flex="100" flex-gt-md="95" flex-gt-lg="85">
      <wz-pagination [pagination]="(collectionsService.data | async).pagination" (getPage)="changePage($event)">
      </wz-pagination>
      <!-- COLLECTION LIST -->
      <wz-collection-item-list [collections]="(collectionsService.data | async).items" [activeCollection]="(activeCollection.data | async).id"
        (setActiveCollection)="selectActiveCollection($event)">
      </wz-collection-item-list>
      <wz-pagination [pagination]="(collectionsService.data | async).pagination" (getPage)="changePage($event)">
      </wz-pagination>
    </section>
  </div>
</section>
