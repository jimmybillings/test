<div class="cart-payment" layout="row" layout-align="center start">
  <div flex="100" flex-gt-lg="85" class="payment-select">
    
    <div *ngIf="userCanPurchaseOnCredit | async" layout="column" layout-gt-xs="row" layout-padding>
      <section flex-gt-lg="30" flex-gt-md="35" flex-md="40" flex="100">
        <header layout="column" layout-align="start">
          <h2 class="commerce-heading">{{ 'CART.PAYMENT.SELECT_PAYMENT' | translate }}</h2>
          <span class="sub-head">{{ 'CART.PAYMENT.ORDER_REVIEW_EXPLAINED' | translate }}</span>
        </header>
        <md-radio-group layout="column" class="example-radio-group" [(ngModel)]="paymentMethod">
          <md-radio-button class="example-radio-button" *ngFor="let method of paymentMethods" [value]="method">
            {{method}}
          </md-radio-button>
        </md-radio-group>
      </section>
      <section *ngIf="paymentMethod === 'Credit Card'" md-scroll-y="" flex-gt-lg="30" flex-gt-md="35" flex-md="40" flex="100">
        <md-card class="wz-form-card cc-form">
          <md-card-title>
            {{ 'CART.PAYMENT.FORM_TITLE' | translate }}
          </md-card-title>
          <md-card-content>
            <wz-cc-form 
              [items]="formItems | async" 
              [serverErrors]="serverErrors"
              (formSubmit)="preAuthorize($event)"></wz-cc-form>
          </md-card-content>
        </md-card>
      </section>
      <section *ngIf="paymentMethod === 'Purchase on Credit'" flex-gt-lg="30" flex-gt-md="35" flex-md="40" flex="100">
        <div>
          <h5 class="md-title">{{ 'CART.PAYMENT.PURCHASE_ON_CREDIT' | translate }}</h5>
          <p class="instructions">{{ 'CART.PAYMENT.PURCHASE_ON_CREDIT_INSTRUCTIONS' | translate }}</p>
          <button md-button
            (click)="selectPurchaseOnCredit()"
            color="primary" 
            class="is-outlined">
            {{ 'CART.PAYMENT.PURCHASE_ON_CREDIT' | translate }}
          </button>
        </div>
      </section>
    </div>

    <div *ngIf="!(userCanPurchaseOnCredit | async)" layout="row" flex="100" flex-gt-lg="85" class="payment-select" layout-padding>        
        <section md-scroll-y="" flex-gt-lg="30" flex-gt-md="35" flex-md="40" flex="100">
          <md-card class="wz-form-card cc-form">
            <md-card-title>
              {{ 'CART.PAYMENT.FORM_TITLE' | translate }}
            </md-card-title>
            <md-card-content>
              <wz-cc-form 
                [items]="formItems | async" 
                [serverErrors]="serverErrors"
                (formSubmit)="preAuthorize($event)"></wz-cc-form>
            </md-card-content>
          </md-card>
        </section>
        <section flex-gt-lg="70" flex-gt-md="65" flex-md="60" flex="100">
          <header layout-align="start">
            <h2 class="commerce-heading">{{ 'CART.PAYMENT.ORDER_REVIEW_EXPLAINED' | translate }}</h2>
          </header>
      </section>
    </div>

    <nav flex="100" layout="row" layout-align="space-between">
      <button md-button color="primary" (click)="goToPreviousTab()" class="checkout-back">
        <md-icon>keyboard_backspace</md-icon>
        {{ 'CART.PAYMENT.BACK_BTN' | translate }}
      </button>
      <button md-button color="primary" (click)="goToNextTab()" class="checkout-forward" [disabled]="!userCanProceed">
        {{ 'CART.BILLING.FORWARD_BTN' | translate }}
        <md-icon>keyboard_backspace</md-icon>
      </button>
    </nav>
  </div>
</div>
