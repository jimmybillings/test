<div *ngIf="!readOnly" flex="100" layout="row" layout-align="end center" class="add-project">
	<button md-button color="primary" (click)="addProject()">
		<md-icon>add_circle_outline</md-icon>{{ 'CART.PROJECTS.ADD_PROJECT_BTN' | translate }}
	</button>
	<button
		md-icon-button
		[md-menu-trigger-for]="quoteOptionsMenu"
		title="{{ 'CART.PROJECTS.MORE_OPTIONS_BTN_HOVER' | translate }}">
			<md-icon>more_vert</md-icon>
	</button>
	<md-menu x-position="before" #quoteOptionsMenu="mdMenu">
		<button md-menu-item><md-icon>bookmark_border</md-icon>Add bulk order id</button>
		<button md-menu-item><md-icon>monetization_on</md-icon>Add a discount</button>
	</md-menu>
</div>

<section class="projects">
	<div class="project" *ngFor="let project of projects">
		<header class="project-info" layout-gt-xs="row" layout="column">
			<div flex="100" flex-gt-sm="70" flex-order-xs="2">
				<project-info-component
					[name]="project.name"
					[clientName]="project.clientName">
				</project-info-component>
			</div>
			<div flex="100" flex-gt-sm="30" layout-padding flex-order-xs="-1">
				<project-actions-component
					*ngIf="!readOnly"
					(remove)="onRemove(project)"
					(edit)="onEdit(project)">
				</project-actions-component>
				<project-price-info-component
					*ngIf="quoteType !== 'ProvisionalOrder'"
					[subtotal]="project.subtotal">
				</project-price-info-component>
				<project-asset-info-component
					*ngIf="readOnly"
					[count]="lineItemCountFor(project)">
				</project-asset-info-component>
			</div>
		</header>

		<line-items-component
			[readOnly]="readOnly"
			[lineItems]="project.lineItems"
			[otherProjects]="projectsOtherThan(project)"
			[userCan]="userCan"
			[quoteType]="quoteType"
			(lineItemsNotify)="delegate($event)">
		</line-items-component>
	</div>
</section>
