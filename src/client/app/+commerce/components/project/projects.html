<div *ngIf="!readOnly" flex="100" layout="row" layout-align="end center" class="add-project">
	<button md-button color="primary" (click)="addProject()">
		<md-icon>add_circle_outline</md-icon>{{ 'CART.PROJECTS.ADD_PROJECT_BTN' | translate }}
	</button>
</div>

<section class="projects">
	<div class="project" *ngFor="let project of projects">
		<header class="project-info" layout-gt-xs="row" layout="column">
			<div flex="100" flex-gt-sm="70" flex-order-xs="2">
				<project-info-component
					[name]="project.name"
					[clientName]="project.clientName">
				</project-info-component>
			</div>
			<div flex="100" flex-gt-sm="30" layout-padding flex-order-xs="-1">
				<project-actions-component
					*ngIf="!readOnly"
          [includeFees]="includeFees"
					(projectActionsNotify)="delegate($event)"
					(remove)="onRemove(project)"
					(edit)="onEdit(project)"
          (addFee)="onClickAddFeeButtonFor(project)">
				</project-actions-component>
				<project-price-info-component
					*ngIf="quoteType !== 'ProvisionalOrder'"
					[subtotal]="project.subtotal">
				</project-price-info-component>
				<project-asset-info-component
					*ngIf="readOnly"
					[count]="lineItemCountFor(project)">
				</project-asset-info-component>
			</div>
		</header>

		<line-items-component
			[readOnly]="readOnly"
			[lineItems]="project.lineItems"
			[otherProjects]="projectsOtherThan(project)"
			[userCan]="userCan"
			[quoteType]="quoteType"
			(lineItemsNotify)="delegate($event)">
		</line-items-component>

		<fee-line-items-component
			[readOnly]="readOnly"
			[feeLineItems]="project.feeLineItems"
			(feeLineItemsNotify)="delegate($event)">
		</fee-line-items-component>
	</div>
</section>
