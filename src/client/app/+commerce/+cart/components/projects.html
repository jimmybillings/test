<section class="header" layout="row" layout-align="center center">
	<header flex="100" flex-gt-sm="95" flex-gt-md="85" flex-gt-lg="80">
    <div flex="100" layout="row" layout-align="space-between end">
			<h2 flex="grow" class="md-display-1">Cart</h2>
			<div class="tools" flex="auto">
				<button *ngIf="!readOnly" md-button class="add-project" (click)="addProject()">
					{{ 'CART.PROJECTS.ADD_PROJECT_BTN' | translate }}
				</button>
			</div>
		</div>
	</header>
</section>

<section class="projects">
  <div layout="row" flex="100" layout-align="center start">
     <div flex="100" flex-gt-sm="95" flex-gt-md="85" flex-gt-lg="80">
			<div class="project" *ngFor="let project of projects">
				<header class="project-info" layout-gt-xs="row" layout-align-gt-xs="space-between center" flex="100" layout="column" layout-align="center center">
					<span><strong>{{ 'CART.PROJECTS.PROJECT_NAME' | translate }}</strong> {{ project.name | slice:0:26 }}</span>
					<span><strong>{{ 'CART.PROJECTS.CLIENT_NAME' | translate }}</strong> {{ project.clientName | slice:0:26 }}</span>
					<span *ngIf="readOnly">
						<!--Does the translate pipe support singular vs. plural?-->
						<span *ngIf="lineItemCountFor(project) == 0">No Assets</span>
						<span *ngIf="lineItemCountFor(project) == 1">1 Asset</span>
						<span *ngIf="lineItemCountFor(project) > 1">{{ lineItemCountFor(project) }} Assets</span>
					</span>
					<span>
						<span><strong>{{ 'CART.PROJECTS.PROJECT_SUBTOTAL' | translate }}</strong> {{ project.subtotal | currency:'USD':true:'1.2-2' }}</span>
						<button *ngIf="!readOnly" md-icon-button [md-menu-trigger-for]="projectOptionsMenu" (click)="selectProject(project)"><md-icon>more_vert</md-icon></button>
						<button *ngIf="!readOnly" (click)="edit(project);" md-icon-button type="button"><md-icon>edit</md-icon></button>
					</span>
				</header>
				<line-items-component *ngIf="!readOnly" [lineItems]="project.lineItems" [otherProjects]="projectsOtherThan(project)" [userCan]="userCan" (lineItemsNotify)="delegate($event)"></line-items-component>
			</div>
		</div>
	</div>
</section>

<md-menu x-position="before" #projectOptionsMenu="mdMenu">
	<button md-menu-item (click)="remove(selectedProject)">{{ 'CART.PROJECTS.REMOVE_PROJECT' | translate }}</button>
	<div class="divider"></div>
	<button disabled md-menu-item>{{ 'CART.PROJECTS.ADD_PACKAGE' | translate }}</button>
	<button disabled md-menu-item>{{ 'CART.PROJECTS.ADD_FEE' | translate }}</button>
	<button disabled md-menu-item>{{ 'CART.PROJECTS.ADD_CLIP' | translate }}</button>
	<button disabled md-menu-item>{{ 'CART.PROJECTS.ADD_CLIPS' | translate }}</button>
	<div class="divider"></div>
	<button disabled md-menu-item>{{ 'CART.PROJECTS.EDIT_PRICE' | translate }}</button>
</md-menu>
